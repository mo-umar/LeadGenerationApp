{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Chatbot</title>
    <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
    <script src="{% static 'js/chatbot.js' %}"></script>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h2>Chat with the Bot</h2>
        </div>
         <!-- Chat display area -->
    <div id="chat-history"></div>

    <!-- chat.html -->
    {% if initial_prompt %}
    <div class="initial-prompt">{{ initial_prompt }}</div>
    {% endif %}
    <!-- Chat content here -->
     
    <!-- Display initial or response message from Django view -->
    {% if response_message %}
        <p id="bot-response">{{ response_message }}</p>
    {% endif %}
    

    <!-- Chat form -->
    <form method="post" id="chat-form">
        {% csrf_token %}
        <input type="text" name="message" placeholder="Enter your message here" required>
        <button type="submit">Send</button>
    </form>

    <script>
        // Clear chat history on page load
        window.addEventListener("load", function() {
            document.getElementById("chat-history").innerHTML = "";  // Clear chat area
        });

        // Handle form submission without storing messages
        document.getElementById("chat-form").onsubmit = function(event) {
            event.preventDefault();
            const messageInput = event.target.message;
            const chatHistory = document.getElementById("chat-history");

            // Add user message to chat history display
            const userMessage = document.createElement("p");
            userMessage.textContent = "You: " + messageInput.value;
            chatHistory.appendChild(userMessage);

            // Simulate a bot response using the response from Django view
            const botResponse = document.getElementById("bot-response").textContent;
            const botMessage = document.createElement("p");
            botMessage.textContent = "Bot: " + botResponse;
            chatHistory.appendChild(botMessage);

            // Clear input
            messageInput.value = "";
        };
    </script>
</body>
</html>
